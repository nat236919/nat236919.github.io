<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Nuttaphat Arunoprayoch "><meta name=description content="Objective In this short blog, I would like to introduce Python decorators to everyone. Some of you might have heard and used it daily. And to those who have never heard of it, let go through some demonstration to show how powerful it can be.
What a Python Decorator is TL;DR: It is a Python object that is used to modify function or class regarding its behaviour.
 Examples 1."><meta name=keywords content="Nuttaphat,Arunoprayoch,Software Engineer,Data Analyst,blog,python,decorators"><meta name=robots content="noodp"><meta name=theme-color content="#252627"><meta property="og:image" content="https://i.ibb.co/K280nKy/social-sharing-img.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="500"><meta property="og:image:height" content="500"><link rel=canonical href=https://nuttaphat.com/posts/2020/06/python-decorators/><title>Python Decorators :: Nuttaphat Arunoprayoch â€” Software Engineer | Data Analyst | Researcher</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=https://nuttaphat.com/main.99a2b4a7dc8bfd0f27e52c079c312203da0b670352e51ad4edd2c650dbc217ef.css><link rel=apple-touch-icon sizes=180x180 href=https://nuttaphat.com/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://nuttaphat.com/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://nuttaphat.com/favicon-16x16.png><link rel=manifest href=https://nuttaphat.com/site.webmanifest><link rel=mask-icon href=https://nuttaphat.com/safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=https://nuttaphat.com/favicon.ico><meta name=msapplication-TileColor content="#252627"><meta name=theme-color content="#252627"><meta itemprop=name content="Python Decorators"><meta itemprop=description content="Objective In this short blog, I would like to introduce Python decorators to everyone. Some of you might have heard and used it daily. And to those who have never heard of it, let go through some demonstration to show how powerful it can be.
What a Python Decorator is TL;DR: It is a Python object that is used to modify function or class regarding its behaviour.
 Examples 1."><meta itemprop=datePublished content="2020-06-28T14:18:03+08:00"><meta itemprop=dateModified content="2020-06-28T14:18:03+08:00"><meta itemprop=wordCount content="536"><meta itemprop=image content="https://nuttaphat.com"><meta itemprop=keywords content="blog,python,decorators,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nuttaphat.com"><meta name=twitter:title content="Python Decorators"><meta name=twitter:description content="Objective In this short blog, I would like to introduce Python decorators to everyone. Some of you might have heard and used it daily. And to those who have never heard of it, let go through some demonstration to show how powerful it can be.
What a Python Decorator is TL;DR: It is a Python object that is used to modify function or class regarding its behaviour.
 Examples 1."><meta property="article:section" content="blog"><meta property="article:published_time" content="2020-06-28 14:18:03 +0800 +0800"></head><body><div class=container><header class=header><span class=header__inner><a href=https://nuttaphat.com/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>$ cd /home/</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=https://nuttaphat.com/about/>About</a></li><li><a href=https://nuttaphat.com/posts/>Blog</a></li><li><a href=https://nuttaphat.com/projects/>Projects</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://nuttaphat.com/posts/2020/06/python-decorators/>Python Decorators</a></h2><div class=post-content><img src=https://upload.wikimedia.org/wikipedia/commons/f/f8/Python_logo_and_wordmark.svg alt="Python Logo" class=center><h2 id=objective>Objective</h2><p>In this short blog, I would like to introduce <strong>Python decorators</strong> to everyone. Some of you might have heard and used it daily.
And to those who have never heard of it, let go through some demonstration to show how powerful it can be.</p><h2 id=what-a-python-decorator-is>What a Python Decorator is</h2><p><em>TL;DR</em>: It is a Python object that is used to modify function or class regarding its behaviour.</p><hr><h3 id=examples>Examples</h3><h4 id=1-without-decorators>1. Without Decorators</h4><p>Let&rsquo;s start with vanilla functions to do some basic arithmetic operations.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>addition</span>(a: int, b: int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> a<span style=color:#f92672>+</span>b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>substraction</span>(a: int, b: int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> a<span style=color:#f92672>-</span>b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>multiplication</span>(a: int, b: int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> a<span style=color:#f92672>*</span>b
</span></span></code></pre></div><p>Clearly, the results from using those functions are pretty simple and straight forward.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>addition(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>) <span style=color:#75715e># 3</span>
</span></span><span style=display:flex><span>substraction(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>) <span style=color:#75715e># -1</span>
</span></span><span style=display:flex><span>multiplication(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>) <span style=color:#75715e># 2</span>
</span></span></code></pre></div><p>So far so good. What&rsquo;s the problem with those functions? What if we parse other data types, besides <em>integer</em>, to one of the functions. What will happen? Of course, it will display an error since we have not handled type checking at all.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>addition(<span style=color:#e6db74>&#39;a&#39;</span>, <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>Traceback (most recent call last):
</span></span><span style=display:flex><span>  File <span style=color:#e6db74>&#34;&lt;stdin&gt;&#34;</span>, line <span style=color:#ae81ff>1</span>, <span style=color:#f92672>in</span> <span style=color:#f92672>&lt;</span>module<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  File <span style=color:#e6db74>&#34;main.py&#34;</span>, line <span style=color:#ae81ff>8</span>, <span style=color:#f92672>in</span> addition
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> a<span style=color:#f92672>+</span>b
</span></span><span style=display:flex><span><span style=color:#a6e22e>TypeError</span>: can only concatenate str (<span style=color:#f92672>not</span> <span style=color:#e6db74>&#34;int&#34;</span>) to str
</span></span></code></pre></div><p>Let&rsquo;s fix it by adding type checking to each function. There are a good number of approaches to check data type. For the sake of simplicity, we will use this following condition.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>isinstance(num, int) <span style=color:#75715e># one parameter</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>all([isinstance(num, int) <span style=color:#66d9ef>for</span> num <span style=color:#f92672>in</span> [<span style=color:#ae81ff>1.</span><span style=color:#f92672>....</span>n]]) <span style=color:#75715e># multiple parameters</span>
</span></span></code></pre></div><p>Apply the condition to all existing functions</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>addition</span>(a: int, b: int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> all([isinstance(num, int) <span style=color:#66d9ef>for</span> num <span style=color:#f92672>in</span> [a, b]]):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> a<span style=color:#f92672>+</span>b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>substraction</span>(a: int, b: int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> all([isinstance(num, int) <span style=color:#66d9ef>for</span> num <span style=color:#f92672>in</span> [a, b]]):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> a<span style=color:#f92672>-</span>b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>multiplication</span>(a: int, b: int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> all([isinstance(num, int) <span style=color:#66d9ef>for</span> num <span style=color:#f92672>in</span> [a, b]]):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> a<span style=color:#f92672>*</span>b
</span></span></code></pre></div><p>As you can see, the functions will now only return data when the arguments parsed are all <em>integer</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>addition(<span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>5</span>) <span style=color:#75715e># -4</span>
</span></span><span style=display:flex><span>addition(<span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#39;sd&#39;</span>)
</span></span></code></pre></div><p>The problem of using this approach is that we need to apply the condition to every function that requires type checking which can be tedious.</p><hr><h4 id=2-with-decorators>2. With Decorators</h4><p>We can simplify all of that by using <strong>python decorators</strong>. First, we define an outer function to receive a decorated function. Then we create a wrapper function (inner) to deal with all logics we need.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> functools <span style=color:#f92672>import</span> wraps
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>type_check</span>(func):
</span></span><span style=display:flex><span>    wraps(func)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>wrapper</span>(<span style=color:#f92672>*</span>args, <span style=color:#f92672>**</span>kwargs):
</span></span><span style=display:flex><span>        res <span style=color:#f92672>=</span> <span style=color:#66d9ef>None</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> all([isinstance(num, int) <span style=color:#66d9ef>for</span> num <span style=color:#f92672>in</span> [<span style=color:#f92672>*</span>args]]):
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>&#39;Running function </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>.</span>format(func<span style=color:#f92672>.</span>__name__))
</span></span><span style=display:flex><span>            res <span style=color:#f92672>=</span> func(<span style=color:#f92672>*</span>args, <span style=color:#f92672>**</span>kwargs)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> res
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> wrapper
</span></span></code></pre></div><p>Apply the decorators to all existing functions with <em>@decoration_function_name</em>. As a result, we have a clear and clean code which works as intended.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#a6e22e>@type_check</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>addition</span>(a: int, b: int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> a<span style=color:#f92672>+</span>b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@type_check</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>substraction</span>(a: int, b: int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> a<span style=color:#f92672>-</span>b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@type_check</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>multiplication</span>(a: int, b: int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> a<span style=color:#f92672>*</span>b
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>multiplication(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>434</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># Running function multiplication</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 434</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>multiplication(<span style=color:#ae81ff>1</span>, []) <span style=color:#75715e># None</span>
</span></span></code></pre></div><hr><h2 id=wrap-up>Wrap Up</h2><p>A Python decorator is a higher-order function that allows a user to add new functionality to an existing object without modifying its structure. The applications of a decorator can be..</p><ul><li>Authorization (JWT, etc)</li><li>Indicate running functions</li><li>Measure time executed</li><li>etc.</li></ul></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://nuttaphat.com/tags/blog>blog</a></span><span class=tag><a href=https://nuttaphat.com/tags/python>python</a></span><span class=tag><a href=https://nuttaphat.com/tags/decorators>decorators</a></span></p></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2022</span>
<span><a href=https://nuttaphat.com>Nuttaphat Arunoprayoch</a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span></div></div></footer></div><script type=text/javascript src=https://nuttaphat.com/bundle.min.d95185bf50d8a4d3905b26a9ac0b4311b4d7de57c97a273d59e27ab5b7250157743ac047cb76c201c7a0c107a4e7aef5866ad588ca51cdb9f9c09aa47ccb1dca.js integrity="sha512-2VGFv1DYpNOQWyaprAtDEbTX3lfJeic9WeJ6tbclAVd0OsBHy3bCAcegwQek5671hmrViMpRzbn5wJqkfMsdyg=="></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-125164332-1","auto"),ga("send","pageview"))</script></body></html>